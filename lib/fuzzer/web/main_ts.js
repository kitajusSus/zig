(()=>{let z=document.getElementById("status"),F=document.getElementById("sectSource"),j=document.getElementById("sectStats"),E=document.getElementById("sourceText"),N=document.getElementById("statTotalRuns"),D=document.getElementById("statUniqueRuns"),v=document.getElementById("statSpeed"),y=document.getElementById("statCoverage"),f=document.getElementById("entryPointsList"),b=fetch("main.wasm"),g=fetch("sources.tar").then((B)=>{if(!B.ok)throw new Error("unable to download sources");return B.arrayBuffer()}),Q=null,H=null,Y=null,X=null,L=new TextDecoder,x=new TextEncoder;z.textContent="Loading WebAssembly...",WebAssembly.instantiateStreaming(b,{js:{log:(B,G)=>{let J=M(B,G);console.log(J)},panic:(B,G)=>{let J=M(B,G);throw new Error("panic: "+J)},timestamp:()=>{return BigInt(new Date().getTime())},emitSourceIndexChange:w,emitCoverageUpdate:l,emitEntryPointsUpdate:P}}).then((B)=>{Q=B.instance.exports,window.wasm=B,z.textContent="Loading sources tarball...",g.then((G)=>{z.textContent="Parsing sources...";let J=new Uint8Array(G),K=Q.alloc(J.length);new Uint8Array(Q.memory.buffer,K,J.length).set(J),Q.unpack(K,J.length),window.addEventListener("popstate",_,!1),R(null),z.textContent="Waiting for server to send source location metadata...",W()})});function _(B){R(B.state)}function R(B){if(history.replaceState({},""),h(location.hash),B==null)window.scrollTo({top:0})}function h(B){if(F.classList.add("hidden"),Y=null,H=null,B.length>1&&B[0]==="#"){let G=B.substring(1),J=G.indexOf("?"),K;if(J===-1)K=G;else K=G.substring(0,J),H=decodeURIComponent(G.substring(J+1));if(K[0]=="l")Y=+K.substring(1),I(Y)}T()}function W(){let B=document.location.host,G=document.location.pathname,J=document.location.protocol==="https:",K=B.match(/^(.+):(\d+)$/),$=K?parseInt(K[2],10):J?443:80,U=K?K[1]:B,p=(J?"wss:":"ws:")+"//"+U+":"+$+G;X=new WebSocket(p),X.binaryType="arraybuffer",X.addEventListener("message",A,!1),X.addEventListener("error",V,!1),X.addEventListener("close",V,!1),X.addEventListener("open",k,!1)}function k(){}function A(B){S(B.data)}function V(){if(!X)return;X.removeEventListener("message",A,!1),X.removeEventListener("error",V,!1),X.removeEventListener("close",V,!1),X.removeEventListener("open",k,!1),X=null,setTimeout(W,1000)}function S(B){if(!Q)return;let G=new Uint8Array(B),J=Q.message_begin(G.length);new Uint8Array(Q.memory.buffer,J,G.length).set(G),Q.message_end()}function w(){if(T(),Y!=null)I(Y)}function l(){P(),u()}function T(){z.classList.add("hidden")}function P(){if(!Q)return;let B=Q.totalRuns(),G=Q.uniqueRuns(),J=Q.totalSourceLocations(),K=Q.coveredSourceLocations();N.innerText=B.toString(),D.innerText=G+" ("+q(G,B)+"%)",y.innerText=K+" / "+J+" ("+q(K,J)+"%)",v.innerText=Q.totalRunsPerSecond().toFixed(0);let Z=C(Q.entryPoints());d(f,Z.length,"<li></li>");for(let $=0;$<Z.length;$+=1){let U=f.children[$];U.innerHTML=O(Q.sourceLocationLinkHtml(Z[$]))}j.classList.remove("hidden")}function u(){if(!Q||Y==null)return;let B=Y;for(let J=0;J<E.children.length;J+=1){let K=E.children[J];if(K.id!=null&&K.id[0]=="l")K.classList.add("l"),K.classList.remove("c")}let G=C(Q.sourceLocationFileCoveredList(B));for(let J=0;J<G.length;J+=1){let K=document.getElementById("l"+G[J]);if(K)K.classList.add("c")}}function d(B,G,J){for(let K=B.childElementCount;K<G;K+=1)B.insertAdjacentHTML("beforeend",J);while(G<B.childElementCount){let K=B.lastChild;if(K)B.removeChild(K)}}function q(B,G){return(Number(B)/Number(G)*100).toFixed(1)}function I(B){if(!Q)return;let G=O(Q.sourceLocationPath(B));if(G.length===0)return;let J=F.children[0];J.innerText=G,E.innerHTML=O(Q.sourceLocationFileHtml(B)),F.classList.remove("hidden"),requestAnimationFrame(()=>{let K=document.getElementById("l"+B);if(K!=null)K.scrollIntoView({behavior:"smooth",block:"center"})})}function M(B,G){if(!Q||G===0)return"";return L.decode(new Uint8Array(Q.memory.buffer,B,G))}function C(B){if(!Q)return new Uint32Array;let G=Number(B&BigInt(4294967295)),J=Number(B>>BigInt(32));if(J===0)return new Uint32Array;return new Uint32Array(Q.memory.buffer,G,J)}function m(B){if(!Q)return;let G=x.encode(B),J=G.length,K=Q.set_input_string(J);new Uint8Array(Q.memory.buffer,K,J).set(G)}function O(B){if(!Q)return"";let G=Number(B&BigInt(4294967295)),J=Number(B>>BigInt(32));return M(G,J)}})();
